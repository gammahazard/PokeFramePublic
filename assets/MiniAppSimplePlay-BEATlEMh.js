import{a as C,r as h,j as c,S}from"./index-BBtjCGTq.js";import{S as T}from"./SimplePlay-B60mkpue.js";import"./romsList-BhNhH5pS.js";import"./8-instr_effect-CUHNsoOc.js";const B=()=>{const{isMiniApp:l,isReady:f,frameContext:g,safeAreaInsets:v}=C(),[b,p]=h.useState(!1);h.useEffect(()=>{l?(console.log("Running in Farcaster Mini App environment"),console.log("Mini App SDK Ready:",f),console.log("Frame Context:",g),console.log("Safe Area Insets:",v),(navigator.userAgent.includes("Warpcast")||navigator.userAgent.includes("WebView")||window.location.search.includes("warpcast=true"))&&(console.log("Warpcast environment detected, enabling audio prompt"),p(!0),localStorage.setItem("isWarpcastEnvironment","true"))):console.log("Running in standard web environment")},[l,f,g,v]),h.useEffect(()=>{if(l){const a=document.querySelector('meta[name="viewport"]');a&&a.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"),document.body.style.overscrollBehavior="none",localStorage.setItem("forceShowTouchControls","true")}return()=>{l&&(localStorage.removeItem("forceShowTouchControls"),localStorage.removeItem("isWarpcastEnvironment"))}},[l]);const y=()=>{try{console.log("WARPCAST AUDIO: User directly activated audio in Warpcast via gesture");try{const V=r=>{const o=document.createElement("audio"),t=["data:audio/mp3;base64,SUQzBAAAAAABEVRYWFgAAAAtAAADY29tbWVudABCaWdTb3VuZEJhbmsuY29tIC8gTGFTb25vdGhlcXVlLm9yZwBURU5DAAAAHQAAA1N3aXRjaCBQbHVzIMKpIE5DSCBTb2Z0d2FyZQBUSVQyAAAABgAAAzIyMzUAVFNTRQAAAA8AAANMYXZmNTcuODMuMTAwAAAAAAAAAAAAAAD/80DEAAAAA0gAAAAATEFNRTMuMTAwVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQsRbAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQMSkAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","data:audio/wav;base64,UklGRjUrAABXQVZFZm10IBAAAAABAAEARKwAAESsAAABAAgAZGF0YRErAAAAAAEBAQICAwMEBAUFBgYHBwgICQkKCgsLDAwNDQ4ODw8QEBERERITExMUFBUVFhYXFxgYGRkaGhsbHBwdHR4eHx8gICEhIiIjIyQkJSUmJiYnKCgpKSoqKyssLC0tLi4vLzAwMTEyMjMzNDQ1NTY2Nzc4ODk5Ojo7Ozw8PT0+Pj8/QEBBQUJCQ0NEREVFRkZHR0hISUlKSkpLS0xMTU1OTk9PT1BQUVFSUlNTVFRVVVZWV1dYWFlZWlpbW1xcXV1eXl9fYGBhYWJiY2NkZGVlZmZnZ2hoaWlqamtrbGxtbW5ub29wcHFxcnJzc3R0dXV2dnd3eHh5eXp6e3t8fH19fn5/f4CAgYGCgoODhISFhYaGh4eIiImJioqLi4yMjY2Ojo+PkJCRkZKSk5OUlJWVlpaXl5iYmZmampubnJydnZ6en5+goKGhoqKjo6SkpaWmpqenqKipqaqqq6usrK2trq6vr7CwsbGysrOztLS1tba2t7e4uLm5urq7u7y8vb2+vr+/wMDBwcLCw8PExMXFxsbHx8jIycnKysvLzMzNzc7Oz8/Q0NHR0tLT09TU1dXW1tfX2NjZ2dra29vc3N3d3t7f3+Dg4eHi4uPj5OTl5ebm5+fo6Onp6urr6+zs7e3u7u/v8PDx8fLy8/P09PX19vb39/j4+fn6+vv7/Pz9/f7+/v/+/v39/Pz7+/r6+fn4+Pf39vb19fT08/Py8vHx8PDv7+7u7e3s7Ovr6urp6ejo5+fm5uXl5OTj4+Li4eHg4N/f3t7d3dzc29va2tnZ2NjX19bW1dXT09LS0dHQ0M/Pzs7Nzc3My8vKysnJyMjHx8bGxcXExMPDwsLBwcDAwL++vr29vLy7u7q6ubm4uLe3tra1tbS0s7OysrGxsLCvrq6traysq6uqqamoqKenp"];o.src=t[r%t.length],o.loop=!1,o.muted=!1,o.volume=1,o.crossOrigin="anonymous",o.setAttribute("autoplay","true"),o.setAttribute("playsinline","true"),document.body.appendChild(o);const e=o.play();e!==void 0&&e.then(()=>{console.log(`WARPCAST AUDIO: Audio element ${r} played successfully`),setTimeout(()=>{document.body.removeChild(o)},1e3)}).catch(n=>{console.log(`WARPCAST AUDIO: Audio element ${r} play failed:`,n),document.body.removeChild(o)})};V(0),setTimeout(()=>V(1),100),setTimeout(()=>V(2),250)}catch(V){console.error("WARPCAST AUDIO: Error with audio elements approach:",V)}const a=(V,r=0)=>{try{const o=window.AudioContext||window.webkitAudioContext,t=new o;return window.audioContext||(window.audioContext=t),t.resume().then(()=>{console.log(`WARPCAST AUDIO: Context ${V} resumed successfully, state:`,t.state),setTimeout(()=>{try{const e=[440,880,220],n=t.createOscillator(),A=t.createGain();A.gain.value=.9,n.type="sine",n.frequency.value=e[V%e.length],n.connect(A),A.connect(t.destination),n.start(t.currentTime),n.stop(t.currentTime+.6),console.log(`WARPCAST AUDIO: Oscillator ${V} approach tried`)}catch(e){console.error(`WARPCAST AUDIO: Oscillator ${V} approach failed:`,e)}},r),setTimeout(()=>{try{const e=t.createBuffer(2,44100,44100),n=e.getChannelData(0),A=e.getChannelData(1);for(let d=0;d<n.length;d++){const m=d/44100,w=.3*Math.sin(2*Math.PI*440*m)+.2*Math.sin(2*Math.PI*880*m)+.1*Math.sin(2*Math.PI*1320*m);n[d]=w,A[d]=w}const s=t.createBufferSource();s.buffer=e;const u=t.createGain();u.gain.value=.85;const i=t.createDynamicsCompressor();i.threshold.value=-50,i.knee.value=40,i.ratio.value=12,i.attack.value=0,i.release.value=.25,s.connect(u),u.connect(i),i.connect(t.destination),s.start(0),console.log(`WARPCAST AUDIO: Buffer ${V} approach tried`)}catch(e){console.error(`WARPCAST AUDIO: Buffer ${V} approach failed:`,e)}},r+150),setTimeout(()=>{try{const e=new Audio;e.src="data:audio/mp3;base64,SUQzBAAAAAABEVRYWFgAAAAtAAADY29tbWVudABCaWdTb3VuZEJhbmsuY29tIC8gTGFTb25vdGhlcXVlLm9yZwBURU5DAAAAHQAAA1N3aXRjaCBQbHVzIMKpIE5DSCBTb2Z0d2FyZQBUSVQyAAAABgAAAzIyMzUAVFNTRQAAAA8AAANMYXZmNTcuODMuMTAwAAAAAAAAAAAAAAD/80DEAAAAA0gAAAAATEFNRTMuMTAwVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQsRbAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQMSkAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",e.volume=1,e.loop=!1,e.muted=!1,e.crossOrigin="anonymous",e.setAttribute("autoplay","true"),e.setAttribute("playsinline","true");const n=t.createMediaElementSource(e),A=t.createGain();A.gain.value=1;const s=t.createBiquadFilter();s.type="lowpass",s.frequency.value=8e3,n.connect(A),A.connect(s),s.connect(t.destination),e.play().then(()=>{console.log(`WARPCAST AUDIO: Audio element ${V} with Web Audio played successfully`)}).catch(u=>{console.error(`WARPCAST AUDIO: Audio element ${V} with Web Audio failed:`,u)})}catch(e){console.error(`WARPCAST AUDIO: Audio element ${V} with Web Audio approach failed:`,e)}},r+300)}).catch(e=>{console.error(`WARPCAST AUDIO: Failed to resume AudioContext ${V}:`,e)}),t}catch(o){return console.error(`WARPCAST AUDIO: Error creating context ${V}:`,o),null}},E=a(1,0),I=a(2,200),x=a(3,500);try{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({audio:!0}).then(V=>{console.log("WARPCAST AUDIO: Microphone access granted, this often helps unlock audio"),V.getTracks().forEach(r=>r.stop()),setTimeout(()=>{a(4,0)},100)}).catch(V=>{console.log("WARPCAST AUDIO: Microphone access denied or not available:",V)})}catch(V){console.error("WARPCAST AUDIO: Error with microphone access:",V)}localStorage.setItem("audioContextInitialized","true"),localStorage.setItem("warpcastAudioVolume","1.0"),localStorage.setItem("warpcastAudioEnabled","true"),localStorage.setItem("audioUnlocked","true"),window.audioInitialized=!0,window.audioVolume=1,window.warpcastAudioEnabled=!0,window.dispatchEvent(new CustomEvent("audio-initialized")),window.dispatchEvent(new CustomEvent("warpcast-audio-unmute")),window.dispatchEvent(new CustomEvent("audio-unlocked")),window.dispatchEvent(new CustomEvent("sound-enabled"));try{const V=document.querySelector("canvas");V&&(V.dispatchEvent(new CustomEvent("audio-enabled")),V.dispatchEvent(new CustomEvent("sound-enabled")))}catch(V){console.error("WARPCAST AUDIO: Canvas event dispatch failed:",V)}setTimeout(()=>{p(!1)},500)}catch(a){console.error("WARPCAST AUDIO: Audio activation error:",a),setTimeout(()=>{p(!1)},1e3)}};return c.jsxs(S,{skipLeft:!0,skipRight:!0,style:{minHeight:"100vh",display:"flex",flexDirection:"column",position:"relative"},children:[c.jsx(T,{}),b&&c.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999,padding:"20px"},onClick:y,children:c.jsxs("div",{style:{backgroundColor:"#222",borderRadius:"12px",padding:"24px",maxWidth:"300px",textAlign:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:[c.jsx("h3",{style:{color:"#fff",fontSize:"20px",marginTop:0,marginBottom:"16px"},children:"Tap to Enable Sound"}),c.jsx("p",{style:{color:"#ddd",fontSize:"16px",lineHeight:1.4,marginBottom:"20px"},children:"Tap anywhere on this screen to enable sound for the game."}),c.jsx("button",{style:{backgroundColor:"#5f6cff",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})})]})};export{B as default};
